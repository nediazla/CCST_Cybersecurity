# MÓDULO 16

# Firewalls de Política Basados en Zonas (ZPF)

(Conceptos, funcionamiento, políticas, inspección y preguntas tipo CCST)

## 1. Qué debes dominar en este módulo

Cisco evalúa:

- Qué es un firewall basado en zonas.
    
- Qué es una zona (zone) y una zona-pareja (zone-pair).
    
- Qué es una policy-map y qué hace.
    
- Cómo se inspecciona tráfico en un ZPF.
    
- Cómo se compara con ACLs.
    
- Qué tráfico se permite, inspecciona o deniega.
    
- Concepto de tráfico “intrazona” e “interzona”.
    
- Comportamiento por defecto (muy importante).
    

---

## 2. Explicación técnica clara y aplicada

### 1. Qué es un Firewall basado en zonas (ZPF)

En lugar de aplicar reglas a interfaces, como en ACLs,  
Cisco organiza la seguridad según **zonas**.

Una **zona** es un grupo lógico de interfaces con un nivel de confianza similar.

Ejemplos de zonas típicas:

- Inside (red interna)
    
- Outside (Internet)
    
- DMZ
    
- Guest (invitados)
    

El firewall define **cómo se comunica una zona con otra**.

---

### 2. Comunicación entre zonas

El modelo ZPF usa **parejas de zonas** (zone-pairs):

- Define una zona de origen.
    
- Define una zona de destino.
    
- Aplica una política **unidireccional** entre ellas.
    

Ejemplo:

`zone-pair NAME   source INSIDE   destination OUTSIDE   service-policy INSIDE-TO-OUTSIDE-POLICY`

Esto significa que la política se aplica **solo** de INSIDE → OUTSIDE,  
no al revés.

---

### 3. Políticas: Class-map y Policy-map

Las políticas funcionan así:

- **class-map**: clasifica el tráfico (por protocolo, puerto, aplicación).
    
- **policy-map**: define qué hacer con ese tráfico:
    
    - inspect (inspeccionar)
        
    - permit (pasar)
        
    - drop (bloquear)
        

En CCST solo necesitas entender las acciones:

#### inspect

El tráfico se analiza y se construye estado (como un firewall stateful).

#### permit/pass

Se permite sin inspección profunda.

#### drop/deny

Se bloquea y se puede generar log.

---

### 4. Comportamiento por defecto del ZPF (muy preguntado)

Esto es crítico:

1. **El tráfico entre zonas distintas está DENEGADO por defecto.**  
    (A diferencia de ACLs, donde no hay zonas y no hay bloqueo por defecto.)
    
2. **El tráfico dentro de la misma zona está PERMITIDO por defecto.**
    
3. **Debe existir una zona-pareja con política para permitir o inspeccionar tráfico entre zonas.**
    

Pregunta típica:  
“Si no existe una zona-pareja entre inside y outside, ¿qué ocurre con el tráfico?”  
→ Es bloqueado.

---

### 5. ZPF vs ACL: diferencias clave

|ACL|ZPF|
|---|---|
|Se aplica a interfaces|Se aplica a zonas|
|No es stateful (salvo reflexivas)|Stateful por diseño|
|Controla paquetes|Controla clases de tráfico|
|Menos flexible|Más robusto y modular|
|No usa zone-pairs|Usa zone-pairs obligatoriamente|

En CCST debes recordar: **ZPF es más moderno y seguro que ACLs tradicionales**.

---

### 6. Ejemplo conceptual

Supongamos:

- Zona INSIDE → usuarios internos
    
- Zona OUTSIDE → Internet
    
- Zona DMZ → servidor web público
    

Queremos:

- INSIDE → OUTSIDE: permitir e inspeccionar
    
- OUTSIDE → INSIDE: bloquear
    
- OUTSIDE → DMZ: permitir solo HTTP/HTTPS
    
- INSIDE → DMZ: permitir todo
    

Conceptualmente, crearíamos una zona-pareja para cada dirección con una política específica.

---

### 7. Uso típico de ZPF

- Redes empresariales con múltiples segmentos.
    
- Entornos donde se necesita control minucioso.
    
- Implementación de firewalls Cisco IOS modernos.
    
- DMZs con control granular.
    
- Sustituir ACLs manuales difíciles de mantener.
    

---

## 3. Preguntas tipo examen CCST

1. **¿Qué es una zona en un firewall basado en zonas?**  
    Un grupo lógico de interfaces con nivel de confianza similar.
    
2. **¿Qué ocurre si no existe una zona-pareja entre dos zonas?**  
    El tráfico entre ellas se bloquea por defecto.
    
3. **Qué define una zone-pair?**  
    Zona de origen + zona de destino + política aplicada unidireccionalmente.
    
4. **Qué acción de política permite y analiza el tráfico?**  
    inspect.
    
5. **Qué diferencia principal hay entre ZPF y ACLs?**  
    ZPF es stateful y basado en zonas; ACLs se aplican por interfaz.
    
6. **Cuál es el comportamiento por defecto del tráfico entre zonas distintas?**  
    Deny (bloqueado).
    
7. **Qué permite el tráfico dentro de la misma zona?**  
    Tráfico intrazona permitido por defecto.
    
8. **Qué elemento clasifica el tráfico en ZPF?**  
    class-map.
    

---

## 4. Resumen estratégico para memorizar

- ZPF organiza seguridad por **zonas**, no por interfaces.
    
- Comunicación entre zonas = necesita zone-pair.
    
- Tráfico entre zonas distintas = bloqueado sin política.
    
- Tráfico dentro de una zona = permitido.
    
- inspect = analizar y permitir.
    
- permit/pass = permitir sin inspección.
    
- drop = bloquear.
    
- ZPF es más moderno y seguro que ACLs tradicionales.